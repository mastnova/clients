(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(54)},27:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},49:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),o=a.n(s),i=a(4),l=a(5),c=a(7),p=a(6),u=a(8),d=a(56),h=a(57),m=(a(27),{index:"/",login:"/login",root:"/root"}),v=a(2),g=a.n(v),f=a(9);var b={login:function(){sessionStorage.setItem("userHasAuth","true")},logout:function(){sessionStorage.setItem("userHasAuth",""),document.location=m.login}},w={hasRoot:{method:"GET",url:"/api/root"},createUser:{method:"POST",url:"/api/user"},login:{method:"POST",url:"/api/login"},getUsers:{method:"GET",url:"/api/users"}};function E(e){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(g.a.mark(function e(t){var a,n,r,s,o,i=arguments;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2?i[2]:void 0,r={method:a,headers:new Headers({"Content-Type":"application/json"})},n&&(r.body=JSON.stringify(n)),e.next=6,fetch(t,r);case 6:return s=e.sent,e.next=9,s.json();case 9:if(o=e.sent,200===s.status){e.next=14;break}return console.error(o.message),4===o.code&&b.logout(),e.abrupt("return",{isOk:!1,data:o});case 14:return e.abrupt("return",{isOk:!0,data:o});case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function y(){return(y=Object(f.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(w.hasRoot.url);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(){return(j=Object(f.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(w.createUser.url,w.createUser.method,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function k(){return(k=Object(f.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(w.login.url,w.login.method,t);case 2:return(a=e.sent).isOk&&b.login(),e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function I(){return(I=Object(f.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(w.getUsers.url);case 2:if(!(t=e.sent).isOk){e.next=5;break}return e.abrupt("return",t.data);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var C={hasRoot:function(){return y.apply(this,arguments)},createUser:function(e){return j.apply(this,arguments)},login:function(e){return k.apply(this,arguments)},getUsers:function(){return I.apply(this,arguments)}},x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).fetchUsers=Object(f.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getUsers();case 2:(t=e.sent)&&a.setState({users:t});case 4:case"end":return e.stop()}},e,this)})),a.showPopup=function(){a.props.openPopup("add-agent")},a.state={users:[]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){sessionStorage.getItem("userHasAuth")?this.fetchUsers():this.props.history.push(m.login)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Index page ",r.a.createElement("button",{onClick:b.logout},"logout")),r.a.createElement("ul",null,this.state.users.map(function(e){return r.a.createElement("li",{key:e.id},e.login," - ",e.role," - ",e.created)})),r.a.createElement("button",{onClick:this.showPopup},"add agent"))}}]),t}(n.PureComponent),N=a(10),P=a(13),_=a.n(P);a(31),a(33);var V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onChange=function(){var e=a.input.value,t=a.props.compareWith,n=function(e,t){return!t||("login"===t?!!e.length:"password"===t?e.length>1:void console.error("Unknown validation type"))}(e,a.props.validationType);t&&(n=e===t&&n),a.setState({isValid:n}),a.props.onChange({name:a.props.name,value:e,isValid:n})},a.onBlur=function(){a.setState({isActivated:!0})},a.state={isValid:!1,isActivated:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;this.props.compareWith&&this.onChange();var t=_()("input",{input__error:!this.state.isValid&&this.state.isActivated},{input__success:this.state.isValid&&this.state.isActivated});return r.a.createElement("div",{className:this.props.icon?"input-wrapper input-wrapper_".concat(this.props.icon):null},r.a.createElement("input",{className:t,type:this.props.type,name:this.props.name,onChange:this.onChange,onBlur:this.onBlur,value:this.props.value,placeholder:this.props.placeholder,ref:function(t){e.input=t}}))}}]),t}(n.PureComponent);V.defaultProps={name:"input",type:"text",value:"",placeholder:"",onChange:function(){}};var S=V,T=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onChangeInput=function(e){var t,n=e.name,r=e.value,s=e.isValid;a.setState((t={},Object(N.a)(t,n,r),Object(N.a)(t,"".concat(n,"IsValid"),s),t))},a.isFormValid=function(){return a.state.loginIsValid&&a.state.passwordIsValid},a.login=function(){var e=Object(f.a)(g.a.mark(function e(t){var n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C.login({login:a.state.login,password:a.state.password});case 3:(n=e.sent).isOk?a.props.history.push(m.index):(r=3===n.data.code?"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",a.setState({errorMessage:r}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={login:"",loginIsValid:!1,password:"",passwordIsValid:!1,errorMessage:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){sessionStorage.getItem("userHasAuth")&&this.props.history.push(m.index)}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-block"},r.a.createElement("form",{className:"login-panel",onSubmit:this.login},r.a.createElement("div",{className:"header-block"},r.a.createElement("div",{className:"header-block__logo"}),r.a.createElement("div",{className:"header-block__title"},"SlotAdmin",r.a.createElement("span",null,"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u0447\u0435\u0442\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"))),r.a.createElement("div",{className:"login-panel__header"},"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u0443\u0447\u0435\u0442\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"),r.a.createElement("label",null,r.a.createElement("div",null,"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(S,{name:"login",icon:"login",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",validationType:"login",value:this.state.login,onChange:this.onChangeInput})),r.a.createElement("label",null,r.a.createElement("div",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(S,{name:"password",icon:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",validationType:"password",value:this.state.password,onChange:this.onChangeInput})),r.a.createElement("div",{className:_()("login-panel__error",{"login-panel__error_show":this.state.errorMessage})},this.state.errorMessage),r.a.createElement("button",{className:"button",type:"submit",disabled:!this.isFormValid()},"\u0412\u0445\u043e\u0434")))))}}]),t}(n.PureComponent),A=(a(35),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).checkIfRootExist=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.hasRoot();case 2:e.sent.hasRoot&&a.props.history.push(m.index);case 4:case"end":return e.stop()}},e,this)})),a.onChangeInput=function(e){var t,n=e.name,r=e.value,s=e.isValid;a.setState((t={},Object(N.a)(t,n,r),Object(N.a)(t,"".concat(n,"IsValid"),s),t))},a.isFormValid=function(){return a.state.loginIsValid&&a.state.passwordIsValid&&a.state.repeatPasswordIsValid},a.createAccount=function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C.createUser({role:"root",login:a.state.login,password:a.state.password});case 3:e.sent.isOk&&a.props.history.push(m.login);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={login:"",loginIsValid:!1,password:"",passwordIsValid:!1,repeatPassword:"",repeatPasswordIsValid:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.checkIfRootExist()}},{key:"render",value:function(){return r.a.createElement("div",{className:"root-page"},r.a.createElement("div",{className:"root-wrapper"},r.a.createElement("div",{className:"root-block"},r.a.createElement("form",{className:"root-panel",onSubmit:this.createAccount},r.a.createElement("div",{className:"root-panel__header"},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"),r.a.createElement("label",null,r.a.createElement("div",null,"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(S,{name:"login",placeholder:"\u041b\u043e\u0433\u0438\u043d",validationType:"login",value:this.state.login,onChange:this.onChangeInput})),r.a.createElement("label",null,r.a.createElement("div",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(S,{type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",validationType:"password",value:this.state.password,onChange:this.onChangeInput})),r.a.createElement("label",null,r.a.createElement("div",null,"\u041f\u043e\u0432\u0442\u043e\u0440 \u043f\u0430\u0440\u043e\u043b\u044f"),r.a.createElement(S,{type:"password",name:"repeatPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",validationType:"password",value:this.state.repeatPassword,compareWith:this.state.password,onChange:this.onChangeInput})),r.a.createElement("button",{className:"button",type:"submit",disabled:!this.isFormValid()},"create")))))}}]),t}(n.PureComponent)),U=a(19),W=a.n(U),M=(a(49),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onChangeInput=function(e){var t,n=e.name,r=e.value,s=e.isValid;a.setState((t={},Object(N.a)(t,n,r),Object(N.a)(t,"".concat(n,"IsValid"),s),t))},a.isFormValid=function(){return a.state.loginIsValid&&a.state.passwordIsValid&&a.state.repeatPasswordIsValid},a.addAgent=function(){var e=Object(f.a)(g.a.mark(function e(t){var n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C.createUser({role:"agent",login:a.state.login,password:a.state.password});case 3:(n=e.sent).isOk?a.props.openPopup("alert",{type:"success",text:"\u0410\u0433\u0435\u043d\u0442 <b>".concat(a.state.login,"</b> \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")}):(r=6===n.data.code?"\u0422\u0430\u043a\u043e\u0439 \u043b\u043e\u0433\u0438\u043d \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",a.props.openPopup("alert",{type:"error",text:r}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={login:"",loginIsValid:!1,password:"",passwordIsValid:!1,repeatPassword:"",repeatPasswordIsValid:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"popup-content popup_add-agent"},r.a.createElement("div",{className:"popup-content__title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0433\u0435\u043d\u0442\u0430"),r.a.createElement("form",{onSubmit:this.addAgent},r.a.createElement("label",null,r.a.createElement("div",null,"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(S,{name:"login",icon:"login",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",validationType:"login",value:this.state.login,onChange:this.onChangeInput})),r.a.createElement("label",null,r.a.createElement("div",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(S,{name:"password",icon:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",validationType:"password",value:this.state.password,onChange:this.onChangeInput})),r.a.createElement("label",null,r.a.createElement("div",null,"\u041f\u043e\u0432\u0442\u043e\u0440 \u043f\u0430\u0440\u043e\u043b\u044f"),r.a.createElement(S,{name:"repeatPassword",icon:"password",type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",validationType:"password",value:this.state.repeatPassword,compareWith:this.state.password,onChange:this.onChangeInput})),r.a.createElement("button",{className:"button",type:"submit",disabled:!this.isFormValid()},r.a.createElement("span",{className:"button_add"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(n.PureComponent)),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.type,a=e.text;return r.a.createElement("div",{className:"popup-content popup_alert"},r.a.createElement("div",{className:"popup_alert__alert popup_alert__alert_".concat(t)},r.a.createElement("span",{className:"popup_alert__msg",dangerouslySetInnerHTML:{__html:a}})),r.a.createElement("button",{className:"button",onClick:this.props.close},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))}}]),t}(n.Component);R.defaultProps={data:{type:"success",text:"success"}};var D=R,F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).preventClosing=function(e){e.stopPropagation()},a.onPressEsc=function(e){"Escape"===e.key&&a.props.close()},a.state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e;return this.props.isOpen?document.addEventListener("keydown",this.onPressEsc):document.removeEventListener("keydown",this.onPressEsc),"add-agent"===this.props.name?e=r.a.createElement(M,{openPopup:this.props.open}):"alert"===this.props.name&&(e=r.a.createElement(D,{data:this.props.data,close:this.props.close})),r.a.createElement(W.a,{transitionName:"showpopup",transitionEnterTimeout:200,transitionLeaveTimeout:150},this.props.isOpen&&r.a.createElement("div",{className:"popup-wrapper",onClick:"alert"===this.props.name?null:this.props.close},r.a.createElement("div",{className:"popup-block"},r.a.createElement("div",{className:"content-wrapper",onClick:this.preventClosing},"alert"!==this.props.name&&r.a.createElement("div",{className:"close-btn",onClick:this.props.close}),e))))}}]),t}(n.PureComponent),H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={popupIsOpen:!1,popupName:"",popupData:null},a.openPopup=function(e,t){a.setState({popupIsOpen:!0,popupName:e,popupData:t})},a.closePopup=function(){a.setState({popupIsOpen:!1})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"router"},r.a.createElement(h.a,{path:m.index,exact:!0,render:function(t){return r.a.createElement(x,Object.assign({},t,{openPopup:e.openPopup}))}}),r.a.createElement(h.a,{path:m.login,exact:!0,component:T}),r.a.createElement(h.a,{path:m.root,exact:!0,component:A}),r.a.createElement(F,{isOpen:this.state.popupIsOpen,name:this.state.popupName,data:this.state.popupData,open:this.openPopup,close:this.closePopup})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(52);o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.4e13dbfe.chunk.js.map